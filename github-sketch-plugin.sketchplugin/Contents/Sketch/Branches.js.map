{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./node_modules/mocha-js-delegate/index.js","webpack://exports/./node_modules/sketch-module-fs/index.js","webpack://exports/./node_modules/sketch-module-google-analytics/index.js","webpack://exports/./node_modules/sketch-module-user-preferences/index.js","webpack://exports/./node_modules/sketch-module-web-view/lib/index.js","webpack://exports/./node_modules/sketch-module-web-view/lib/parseQuery.js","webpack://exports/./src/analytics.js","webpack://exports/./src/commands/Branches.js","webpack://exports/./src/common.js","webpack://exports/./src/preferences.js","webpack://exports/external \"sketch/dom\""],"names":["key","sendEvent","context","category","action","label","value","sendError","error","checkForFile","executeSafely","listBranchesCommand","listBranches","exec","split","pop","currentBranch","getCurrentBranch","webUI","identifier","height","onlyShowCloseButton","hideTitleBar","handlers","checkoutBranch","name","command","app","NSApp","delegate","refreshCurrentDocument","panel","close","document","showMessage","deleteBranch","createBranch","branchName","createInput","responseCode","message","eval","join","Document","require","setIconForAlert","alert","reloadCurrentSketchDocument","path","fileURL","open","func","e","createFailAlert","task","NSTask","alloc","init","pipe","NSPipe","errPipe","getCurrentDirectory","setLaunchPath_","setArguments_","NSArray","arrayWithArray_","standardOutput","standardError","launch","errData","fileHandleForReading","readDataToEndOfFile","data","terminationStatus","length","NSString","initWithData_encoding_","NSUTF8StringEncoding","NSException","raise_format_","URLByDeletingLastPathComponent","getGitDirectory","trim","replace","getCurrentFileName","lastPathComponent","title","buttonToReport","console","log","NSAlert","informativeText","messageText","addButtonWithTitle","runModal","errorString","JSON","stringify","urlString","encodeURIComponent","url","NSURL","URLWithString","NSWorkspace","sharedWorkspace","openURL","msg","okLabel","cancelLabel","accessory","NSView","initWithFrame","NSMakeRect","input","NSTextField","editable","addSubview","setMessageText","setAccessoryView","stringValue","createInputWithCheckbox","checkboxMsg","checked","TextArea","checkbox","NSButton","setButtonType","state","view","getValue","createSelect","items","selectedItemIndex","NSComboBox","addItemsWithObjectValues","selectItemAtIndex","sel","indexOfSelectedItem","index","currentBranchCommand","branch","exportArtboards","prefs","currentFileName","currentFileNameWithoutExtension","exportFolder","exportFormat","exportScale","includeOverviewFile","pluginPath","scriptPath","bundlePath","NSBundle","mainBundle","fileFolder","checkForGitRepository","x","y","width","heigh","scrollView","NSScrollView","borderStyle","NSLineBorder","contentSize","NSTextView","minSize","NSMakeSize","maxSize","Infinity","documentView","string","keyPref","PREFS_FILE","LOCAL_PREFS","autoExportOnSave","GLOBAL_PREFS","terminal","diffByDefault","sendAnalytics","getUserPreferences","localPrefs","parse","fs","readFile","Object","assign","prefsManager","setUserPreferences","globalPrefs","keys","forEach","indexOf","k","writeFile"],"mappings":";;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uEAAuE,wDAAwD,EAAE;;AAEjI;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9DA;AACA;AACA;AACA,iIAAiI;AACjI;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACrCA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;ACtCA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,2CAA2C;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;;ACnHA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,IAAI;AACP;AACA;;;;;;;;;;;;;;;;;;;ACXA;AACA;AAEA,IAAMA,MAAM,aAAZ;AAEO,SAASC,SAAT,CAAoBC,OAApB,EAA6BC,QAA7B,EAAuCC,MAAvC,EAA+CC,KAA/C,EAAsDC,KAAtD,EAA6D;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAAO,IAAP;AACD;AAEM,SAASC,SAAT,CAAoBL,OAApB,EAA6BM,KAA7B,EAAoC;AACzC;AACA;AACA,SAAO,IAAP;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","file":"Branches.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/commands/Branches.js\");\n","/* globals NSUUID MOClassDescription NSObject NSSelectorFromString NSClassFromString */\n\nmodule.exports = function (selectorHandlerDict, superclass) {\n  var uniqueClassName = 'MochaJSDelegate_DynamicClass_' + NSUUID.UUID().UUIDString()\n\n  var delegateClassDesc = MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName, superclass || NSObject)\n\n  delegateClassDesc.registerClass()\n\n  // Storage Handlers\n  var handlers = {}\n\n  // Define interface\n  this.setHandlerForSelector = function (selectorString, func) {\n    var handlerHasBeenSet = (selectorString in handlers)\n    var selector = NSSelectorFromString(selectorString)\n\n    handlers[selectorString] = func\n\n    /*\n      For some reason, Mocha acts weird about arguments: https://github.com/logancollins/Mocha/issues/28\n      We have to basically create a dynamic handler with a likewise dynamic number of predefined arguments.\n    */\n    if (!handlerHasBeenSet) {\n      var args = []\n      var regex = /:/g\n      while (regex.exec(selectorString)) {\n        args.push('arg' + args.length)\n      }\n\n      var dynamicFunction = eval('(function (' + args.join(', ') + ') { return handlers[selectorString].apply(this, arguments); })')\n\n      delegateClassDesc.addInstanceMethodWithSelector_function_(selector, dynamicFunction)\n    }\n  }\n\n  this.removeHandlerForSelector = function (selectorString) {\n    delete handlers[selectorString]\n  }\n\n  this.getHandlerForSelector = function (selectorString) {\n    return handlers[selectorString]\n  }\n\n  this.getAllHandlers = function () {\n    return handlers\n  }\n\n  this.getClass = function () {\n    return NSClassFromString(uniqueClassName)\n  }\n\n  this.getClassInstance = function () {\n    return NSClassFromString(uniqueClassName).new()\n  }\n\n  // Convenience\n  if (typeof selectorHandlerDict === 'object') {\n    for (var selectorString in selectorHandlerDict) {\n      this.setHandlerForSelector(selectorString, selectorHandlerDict[selectorString])\n    }\n  }\n}\n","module.exports = {\n  mkdir: function (path) {\n    var error = null\n    var result = NSFileManager.defaultManager().createDirectoryAtPath_withIntermediateDirectories_attributes_error(path, true, {}, error)\n    if (error != null) {\n      throw new Error(error)\n    }\n    return result\n  },\n\n  readFile: function (path, encoding) {\n    var error = null\n    var result = NSString.stringWithContentsOfFile_encoding_error(path, encoding || NSUTF8StringEncoding, error)\n    if (error != null) {\n      throw new Error(error)\n    }\n    return result\n  },\n\n  writeFile: function (path, data, encoding) {\n    var error = null\n    var result\n    if (data.TIFFRepresentation) {\n      var tiffData = data.TIFFRepresentation()\n      var p = NSBitmapImageRep.imageRepWithData(tiffData)\n      var data = p.representationUsingType_properties(encoding || NSPNGFileType, null)\n      data.writeToFile_atomically(path, true)\n    } else {\n      result = NSString.stringWithString(data).writeToFile_atomically_encoding_error(path, true, encoding || NSUTF8StringEncoding, error)\n    }\n    if (error != null) {\n      throw new Error(error)\n    }\n    return result\n  },\n\n  rename: function (oldPath, newPath) {\n    var error = null\n    var result = NSFileManager.defaultManager().moveItemAtPath_toPath_error(oldPath, newPath, error)\n    if (error != null) {\n      throw new Error(error)\n    }\n    return result\n  },\n\n  rmdir: function (path) {\n    var error = null\n    var result = NSFileManager.defaultManager().removeItemAtPath_error(path, error)\n    if (error != null) {\n      throw new Error(error)\n    }\n    return result\n  }\n}\n","var kUUIDKey = 'google.analytics.uuid'\nvar uuid = NSUserDefaults.standardUserDefaults().objectForKey(kUUIDKey)\nif (!uuid) {\n  uuid = NSUUID.UUID().UUIDString()\n  NSUserDefaults.standardUserDefaults().setObject_forKey(uuid, kUUIDKey)\n}\n\nfunction jsonToQueryString(json) {\n  return '?' + Object.keys(json).map(function (key) {\n    return encodeURIComponent(key) + '=' + encodeURIComponent(json[key]);\n  }).join('&')\n}\n\nmodule.exports = function (context, trackingId, hitType, props) {\n  var payload = {\n    v: 1,\n    tid: trackingId,\n    ds: 'Sketch ' + NSBundle.mainBundle().objectForInfoDictionaryKey(\"CFBundleShortVersionString\"),\n    cid: uuid,\n    t: hitType,\n    an: context.plugin.name(),\n    aid: context.plugin.identifier(),\n    av: context.plugin.version()\n  }\n  if (props) {\n    Object.keys(props).forEach(function (key) {\n      payload[key] = props[key]\n    })\n  }\n\n  var url = NSURL.URLWithString(\n    NSString.stringWithFormat(\"https://www.google-analytics.com/collect%@\", jsonToQueryString(payload))\n  )\n\n  if (url) {\n    NSURLSession.sharedSession().dataTaskWithURL(url).resume()\n  }\n}\n","const SUITE_PREFIX = 'plugin.sketch.'\n\nfunction isPresent (data) {\n  return data != null\n}\n\nmodule.exports = {\n  getUserPreferences: function (pluginName, defaultPrefs) {\n    var prefs = {}\n    var store = NSUserDefaults.alloc().initWithSuiteName(SUITE_PREFIX + pluginName)\n    Object.keys(defaultPrefs).forEach(function (k) {\n      if (typeof defaultPrefs[k] === 'boolean') {\n        prefs[k] = isPresent(store.boolForKey(k)) ? Boolean(store.boolForKey(k)) : defaultPrefs[k]\n      } else if (typeof defaultPrefs[k] === 'number') {\n        prefs[k] = isPresent(store.doubleForKey(k)) ? store.doubleForKey(k) : defaultPrefs[k]\n      } else if (typeof defaultPrefs[k] === 'string') {\n        prefs[k] = isPresent(store.stringForKey(k)) ? '' + store.stringForKey(k) : defaultPrefs[k]\n      } else if (Array.isArray(defaultPrefs[k])) {\n        prefs[k] = store.arrayForKey(k) || defaultPrefs[k]\n      } else {\n        prefs[k] = store.dictionaryForKey(k) || defaultPrefs[k]\n      }\n    })\n    return prefs\n  },\n  setUserPreferences: function (pluginName, prefs) {\n    var store = NSUserDefaults.alloc().initWithSuiteName(SUITE_PREFIX + pluginName)\n    Object.keys(prefs).forEach(function (k) {\n      if (typeof prefs[k] === 'boolean') {\n        store.setBool_forKey(prefs[k], k)\n      } else if (typeof prefs[k] === 'number') {\n        store.setDouble_forKey(prefs[k], k)\n      } else {\n        store.setObject_forKey(prefs[k], k)\n      }\n    })\n    store.synchronize()\n  }\n}\n","/* globals NSUUID NSThread NSPanel NSMakeRect NSTexturedBackgroundWindowMask NSTitledWindowMask NSWindowTitleHidden NSClosableWindowMask NSColor NSWindowMiniaturizeButton NSWindowZoomButton NSFloatingWindowLevel WebView COScript */\nvar MochaJSDelegate = require('mocha-js-delegate')\nvar parseQuery = require('./parseQuery')\n\nvar coScript = COScript.currentCOScript()\n\nvar LOCATION_CHANGED = 'webView:didChangeLocationWithinPageForFrame:'\n\nfunction WebUI (context, frameLocation, options) {\n  // ColorPicker main window\n  var identifier = options.identifier || NSUUID.UUID().UUIDString()\n  var threadDictionary = NSThread.mainThread().threadDictionary()\n  var backgroundColor = options.background || NSColor.whiteColor()\n  var panel = threadDictionary[identifier] ? threadDictionary[identifier] : NSPanel.alloc().init()\n\n  // Window size\n  panel.setFrame_display(NSMakeRect(\n    options.x || 0,\n    options.y || 0,\n    options.width || 240,\n    options.height || 180\n  ), true)\n\n  // Titlebar\n  panel.setTitle(options.title || context.plugin.name())\n  if (options.hideTitleBar) {\n    panel.setTitlebarAppearsTransparent(true)\n    panel.setTitleVisibility(NSWindowTitleHidden)\n  }\n\n  // Hide minize and zoom buttons\n  if (options.onlyShowCloseButton) {\n    panel.standardWindowButton(NSWindowMiniaturizeButton).setHidden(true)\n    panel.standardWindowButton(NSWindowZoomButton).setHidden(true)\n  }\n\n  // Close window callback\n  if (options.onPanelClose) {\n    var closeButton = panel.standardWindowButton(NSWindowCloseButton)\n    closeButton.setCOSJSTargetFunction(function(sender) {\n      options.onPanelClose()\n      COScript.currentCOScript().setShouldKeepAround(false)\n      threadDictionary.removeObjectForKey(options.identifier)\n      panel.close()\n    })\n    closeButton.setAction(\"callAction:\")\n  }\n\n  panel.setStyleMask(options.styleMask || (NSTexturedBackgroundWindowMask | NSTitledWindowMask | NSClosableWindowMask))\n  panel.setBackgroundColor(backgroundColor)\n  panel.becomeKeyWindow()\n  panel.setLevel(NSFloatingWindowLevel)\n\n  threadDictionary[identifier] = panel\n\n  if (options.shouldKeepAround !== false) { // Long-running script\n    coScript.setShouldKeepAround(true)\n  }\n\n  // Add Web View to window\n  var webView = WebView.alloc().initWithFrame(NSMakeRect(\n    0,\n    options.hideTitleBar ? -24 : 0,\n    options.width || 240,\n    (options.height || 180) - (options.hideTitleBar ? 0 : 24)\n  ))\n\n  if (options.frameLoadDelegate || options.handlers) {\n    var handlers = options.frameLoadDelegate || {}\n    if (options.handlers) {\n      var lastQueryId\n      handlers[LOCATION_CHANGED] = function (webview, frame) {\n        var query = webview.windowScriptObject().evaluateWebScript('window.location.hash')\n        query = parseQuery(query)\n        if (query.pluginAction && query.actionId && query.actionId !== lastQueryId && query.pluginAction in options.handlers) {\n          lastQueryId = query.actionId\n          try {\n            query.pluginArgs = JSON.parse(query.pluginArgs)\n          } catch (err) {}\n          options.handlers[query.pluginAction].apply(context, query.pluginArgs)\n        }\n      }\n    }\n    var frameLoadDelegate = new MochaJSDelegate(handlers)\n    webView.setFrameLoadDelegate_(frameLoadDelegate.getClassInstance())\n  }\n  if (options.uiDelegate) {\n    var uiDelegate = new MochaJSDelegate(options.uiDelegate)\n    webView.setUIDelegate_(uiDelegate.getClassInstance())\n  }\n\n  webView.setOpaque(true)\n  webView.setBackgroundColor(backgroundColor)\n\n  // When frameLocation is a file, prefix it with the Sketch Resources path\n  if ((/^(?!http|localhost|www|file).*\\.html?$/).test(frameLocation)) {\n    frameLocation = context.plugin.urlForResourceNamed(frameLocation).path()\n  }\n  webView.setMainFrameURL_(frameLocation)\n\n  panel.contentView().addSubview(webView)\n  panel.center()\n  panel.makeKeyAndOrderFront(null)\n\n  return {\n    panel: panel,\n    eval: webView.stringByEvaluatingJavaScriptFromString,\n    webView: webView\n  }\n}\n\nWebUI.clean = function () {\n  coScript.setShouldKeepAround(false)\n}\n\nmodule.exports = WebUI\n","module.exports = function (query) {\n  query = query.split('?')[1]\n  if (!query) { return }\n  query = query.split('&').reduce(function (prev, s) {\n    var res = s.split('=')\n    if (res.length === 2) {\n      prev[decodeURIComponent(res[0])] = decodeURIComponent(res[1])\n    }\n    return prev\n  }, {})\n  return query\n}\n","import send from 'sketch-module-google-analytics'\nimport { getUserPreferences } from './preferences'\n\nconst key = 'UA-ffffff-1'\n\nexport function sendEvent (context, category, action, label, value) {\n  // const { sendAnalytics } = getUserPreferences(context)\n  // if (!sendAnalytics) { return }\n  // const payload = {}\n  // if (category) { payload.ec = category }\n  // if (action) { payload.ea = action }\n  // if (label) { payload.el = label }\n  // if (value) { payload.ev = value }\n\n  return true\n}\n\nexport function sendError (context, error) {\n  // const { sendAnalytics } = getUserPreferences(context)\n  // if (!sendAnalytics) { return }\n  return true\n}\n","// Branches (cmd alt ctrl b)\nimport { sendEvent } from '../analytics'\nimport { getCurrentBranch, checkForFile, exec, executeSafely, createInput } from '../common'\nimport WebUI from 'sketch-module-web-view'\n\nexport default function (context) {\n  if (!checkForFile(context)) { return }\n  executeSafely(context, function () {\n    sendEvent(context, 'Branch', 'Switch branch', 'Start switching branch')\n    var listBranchesCommand = 'git for-each-ref --format=\\'%(refname:short)\\' refs/heads/'\n    var listBranches = exec(context, listBranchesCommand)\n    if (listBranches != null && listBranches != '') {\n      listBranches = listBranches.split('\\n')\n      listBranches.pop() // last item is always an empty string\n      var currentBranch = getCurrentBranch(context)\n      const webUI = new WebUI(context, 'branches.html', {\n        identifier: 'git-sketch-plugin.branches',\n        height: 280,\n        onlyShowCloseButton: true,\n        hideTitleBar: true,\n        handlers: {\n          checkoutBranch (name) {\n            executeSafely(context, function () {\n              sendEvent(context, 'Branch', 'Switch branch', 'Did switch branch')\n              var command = 'git checkout -q ' + name\n              exec(context, command)\n              var app = NSApp.delegate()\n              app.refreshCurrentDocument()\n              webUI.panel.close()\n              context.document.showMessage(`Switched to branch '${name}'`)\n            })\n          },\n          deleteBranch (name) {\n            executeSafely(context, function () {\n              sendEvent(context, 'Branch', 'Delete branch', 'Did delete branch')\n              var command = 'git branch -d ' + name\n              exec(context, command)\n              context.document.showMessage(`Deleted branch '${name}'`)\n            })\n          },\n          createBranch () {\n            executeSafely(context, function () {\n              sendEvent(context, 'Branch', 'Create branch', 'Start creating branch')\n              var branchName = createInput(context, 'New branch name', 'Create branch')\n\n              if (branchName.responseCode == 1000 && branchName.message != null) {\n                var command = 'git checkout -qb ' + branchName.message\n                exec(context, command)\n                context.document.showMessage(\"Switched to a new branch '\" + branchName.message + \"'\")\n                sendEvent(context, 'Branch', 'Create branch', 'Did create branch')\n                webUI.panel.close()\n              } else {\n                sendEvent(context, 'Branch', 'Create branch', 'Cancel creating branch')\n              }\n            })\n          }\n        }\n      })\n      webUI.eval('window.branches=[\"' + listBranches.join('\", \"') + '\"]')\n      webUI.eval('window.currentBranch=\"' + currentBranch + '\"')\n      webUI.eval('window.ready=true')\n    } else {\n      sendEvent(context, 'Branch', 'Switch branch', 'no branches')\n      context.document.showMessage('No branches')\n    }\n  })\n}\n","// Common library of things\nimport { sendError } from './analytics'\n\nconst Document = require('sketch/dom').Document;\n\nexport function setIconForAlert (context, alert) {\n  // alert.setIcon(NSImage.alloc().initWithContentsOfFile(\n  //   context.plugin.urlForResourceNamed('icon.png').path()))\n}\n\nexport function reloadCurrentSketchDocument (context) {\n  // Reload a sketch document currently open\n  var path = context.document.fileURL().path()\n  path = path + ''\n  context.document.close()\n  Document.open(path)\n}\n\nexport function executeSafely (context, func) {\n  try {\n    func(context)\n  } catch (e) {\n    sendError(context, e)\n    createFailAlert(context, 'Failed...', e, true)\n  }\n}\n\nexport function exec (context, command) {\n  var task = NSTask.alloc().init()\n  var pipe = NSPipe.pipe()\n  var errPipe = NSPipe.pipe()\n\n  var path = getCurrentDirectory(context)\n  command = `cd \"${path}\" && ${command}`\n\n  task.setLaunchPath_('/bin/bash')\n  task.setArguments_(NSArray.arrayWithArray_(['-c', '-l', command]))\n  task.standardOutput = pipe\n  task.standardError = errPipe\n  task.launch()\n\n  const errData = errPipe.fileHandleForReading().readDataToEndOfFile()\n  const data = pipe.fileHandleForReading().readDataToEndOfFile()\n\n  if (task.terminationStatus() != 0) {\n    let message = 'Unknow error'\n    if (errData != null && errData.length()) {\n      message = NSString.alloc().initWithData_encoding_(errData, NSUTF8StringEncoding)\n    } else if (data != null && data.length()) {\n      message = NSString.alloc().initWithData_encoding_(data, NSUTF8StringEncoding)\n    }\n    return NSException.raise_format_('failed', message)\n  }\n\n  return NSString.alloc().initWithData_encoding_(data, NSUTF8StringEncoding)\n}\n\nexport function getCurrentDirectory (context) {\n  return context.document.fileURL().URLByDeletingLastPathComponent().path()\n}\n\nexport function getGitDirectory (context) {\n  return exec(context, 'git rev-parse --show-toplevel').trim().replace('\u001b(B\u001b[m', '')\n}\n\nexport function getCurrentFileName (context) {\n  return context.document.fileURL().lastPathComponent()\n}\n\nexport function createFailAlert (context, title, error, buttonToReport) {\n  console.log(error)\n  var alert = NSAlert.alloc().init()\n  alert.informativeText = '' + error\n  alert.messageText = title\n  alert.addButtonWithTitle('OK')\n  if (buttonToReport) {\n    alert.addButtonWithTitle('Report issue')\n  }\n  setIconForAlert(context, alert)\n\n  var responseCode = alert.runModal()\n\n  if (responseCode == 1001) {\n    var errorString = error\n    if (typeof error === 'object') {\n      try {\n        errorString = JSON.stringify(error, null, '\\t')\n        if (errorString === '{}') {\n          errorString = error\n        }\n      } catch (e) {}\n    }\n    var urlString = `https://github.com/mathieudutour/git-sketch-plugin/issues/new?body=${encodeURIComponent('### How did it happen?\\n1.\\n2.\\n3.\\n\\n\\n### Error log\\n\\n```\\n' + errorString + '\\n```')}`\n    var url = NSURL.URLWithString(urlString)\n    NSWorkspace.sharedWorkspace().openURL(url)\n  }\n\n  return {\n    responseCode\n  }\n}\n\nexport function createInput (context, msg, okLabel, cancelLabel) {\n  var accessory = NSView.alloc().initWithFrame(NSMakeRect(0, 0, 300, 50))\n  var input = NSTextField.alloc().initWithFrame(NSMakeRect(0, 25, 300, 25))\n  input.editable = true\n  accessory.addSubview(input)\n\n  var alert = NSAlert.alloc().init()\n  alert.setMessageText(msg)\n  alert.addButtonWithTitle(okLabel || 'OK')\n  alert.addButtonWithTitle(cancelLabel || 'Cancel')\n  setIconForAlert(context, alert)\n  alert.setAccessoryView(accessory)\n\n  var responseCode = alert.runModal()\n  var message = input.stringValue()\n\n  return {\n    responseCode: responseCode,\n    message: message\n  }\n}\n\nexport function createInputWithCheckbox (context, msg, checkboxMsg, checked, okLabel, cancelLabel) {\n  var accessory = NSView.alloc().initWithFrame(NSMakeRect(0, 0, 300, 100))\n  var input = TextArea(0, 25, 300, 75)\n  var checkbox = NSButton.alloc().initWithFrame(NSMakeRect(0, 0, 300, 25))\n  checkbox.setButtonType(3)\n  checkbox.title = checkboxMsg\n  checkbox.state = checked ? 1 : 0\n  accessory.addSubview(input.view)\n  accessory.addSubview(checkbox)\n\n  var alert = NSAlert.alloc().init()\n  alert.setMessageText(msg)\n  alert.addButtonWithTitle(okLabel || 'OK')\n  alert.addButtonWithTitle(cancelLabel || 'Cancel')\n  setIconForAlert(context, alert)\n  alert.setAccessoryView(accessory)\n\n  var responseCode = alert.runModal()\n  var message = input.getValue()\n\n  return {\n    responseCode: responseCode,\n    message: message,\n    checked: checkbox.state() == 1\n  }\n}\n\nexport function createSelect (context, msg, items, selectedItemIndex, okLabel, cancelLabel) {\n  selectedItemIndex = selectedItemIndex || 0\n\n  var accessory = NSComboBox.alloc().initWithFrame(NSMakeRect(0, 0, 200, 25))\n  accessory.addItemsWithObjectValues(items)\n  accessory.selectItemAtIndex(selectedItemIndex)\n\n  var alert = NSAlert.alloc().init()\n  alert.setMessageText(msg)\n  alert.addButtonWithTitle(okLabel || 'OK')\n  alert.addButtonWithTitle(cancelLabel || 'Cancel')\n  setIconForAlert(context, alert)\n  alert.setAccessoryView(accessory)\n\n  var responseCode = alert.runModal()\n  var sel = accessory.indexOfSelectedItem()\n\n  return {\n    responseCode: responseCode,\n    index: sel\n  }\n}\n\nexport function getCurrentBranch (context) {\n  const path = getCurrentDirectory(context)\n  const currentBranchCommand = `cd \"${path}\" && git rev-parse --abbrev-ref HEAD`\n  let branch\n  try {\n    branch = exec(context, currentBranchCommand).split('\\n')[0]\n  } catch (e) {\n    branch = 'master'\n  }\n  return branch\n}\n\nexport function exportArtboards (context, prefs) {\n  const currentFileName = getCurrentFileName(context)\n  const path = getCurrentDirectory(context)\n  const currentFileNameWithoutExtension = currentFileName.replace(/\\.sketch$/, '')\n  const {exportFolder, exportFormat, exportScale, includeOverviewFile} = prefs\n  const pluginPath = context.scriptPath.replace(/\\/Contents\\/Sketch\\/(\\w*)\\.js$/, '').replace(/ /g, '\\\\ ')\n  const bundlePath = NSBundle.mainBundle().bundlePath()\n  const fileFolder = exportFolder + '/' + currentFileNameWithoutExtension\n  const command = `${pluginPath}/exportArtboard.sh \"${path}\" \"${exportFolder}\" \"${fileFolder}\" \"${bundlePath}\" \"${currentFileName}\" \"${exportFormat || 'png'}\" \"${exportScale}\" \"${includeOverviewFile}\"`\n  return exec(context, command)\n}\n\nexport function checkForFile (context) {\n  try {\n    getCurrentFileName(context)\n    getCurrentDirectory(context)\n    return true\n  } catch (e) {\n    sendError(context, 'Missing file')\n    createFailAlert(context, 'Missing file', 'You need to open a sketch file before doing that')\n    return false\n  }\n}\nexport function checkForGitRepository (context) {\n  try {\n    getGitDirectory(context)\n    return true\n  } catch (e) {\n    sendError(context, 'Not a git repository')\n    createFailAlert(context, 'Not a git repository', 'You need to init git repository first')\n    return false\n  }\n}\n\nfunction TextArea (x, y, width, heigh) {\n  const scrollView = NSScrollView.alloc().initWithFrame(NSMakeRect(x, y, width, heigh))\n  scrollView.borderStyle = NSLineBorder\n  const contentSize = scrollView.contentSize()\n  const input = NSTextView.alloc().initWithFrame(NSMakeRect(0, 0, contentSize.width, contentSize.height))\n  input.minSize = NSMakeSize(0, contentSize.height)\n  input.maxSize = NSMakeSize(contentSize.width, Infinity)\n  scrollView.documentView = input\n  return {\n    view: scrollView,\n    getValue: () => input.string()\n  }\n}\n","import prefsManager from 'sketch-module-user-preferences'\nimport fs from 'sketch-module-fs'\nimport {exec, getGitDirectory} from './common'\n\nconst keyPref = 'gitSketch'\nconst PREFS_FILE = '.gitsketchrc'\nconst LOCAL_PREFS = {\n  exportFolder: '.exportedArtboards',\n  exportFormat: 'png',\n  exportScale: '1.0',\n  includeOverviewFile: true,\n  autoExportOnSave: false\n}\nconst GLOBAL_PREFS = {\n  terminal: 'Terminal',\n  diffByDefault: true,\n  sendAnalytics: false\n}\n\nexport function getUserPreferences (context) {\n  let localPrefs = {}\n  try {\n    var path = getGitDirectory(context)\n    localPrefs = JSON.parse(fs.readFile(path + '/' + PREFS_FILE))\n  } catch (e) {\n    console.log(e)\n  }\n  return Object.assign(\n    {},\n    LOCAL_PREFS,\n    prefsManager.getUserPreferences(keyPref, GLOBAL_PREFS),\n    localPrefs\n  )\n}\n\nexport function setUserPreferences (context, prefs) {\n  const localPrefs = {}\n  const globalPrefs = {}\n  Object.keys(prefs).forEach(k => {\n    if (Object.keys(LOCAL_PREFS).indexOf(k) !== -1) {\n      localPrefs[k] = prefs[k]\n    } else {\n      globalPrefs[k] = prefs[k]\n    }\n  })\n\n  try {\n    var path = getGitDirectory(context)\n    fs.writeFile(path + '/' + PREFS_FILE, JSON.stringify(localPrefs, null, '  '))\n    exec(context, 'git add \"' + path + '/' + PREFS_FILE + '\"')\n  } catch (e) {\n    console.log(e)\n  }\n  return prefsManager.setUserPreferences(keyPref, globalPrefs)\n}\n","module.exports = require(\"sketch/dom\");"],"sourceRoot":""}